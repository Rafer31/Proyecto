<div class="companies-grid">
  @for (company of companies(); track company.idempresa) {
  <mat-card class="company-card">
    <mat-card-header>
      <mat-card-title>Empresa: {{ company.nomempresa }}</mat-card-title>
    </mat-card-header>

    @if (company.imageUrl) {
    <img
      mat-card-image
      [src]="company.imageUrl"
      alt="Imagen de {{ company.nomempresa }}"
    />
    } @else {
    <div class="no-image">
      <p>Sin imagen</p>
      <mat-icon>business</mat-icon>
    </div>
    }

    <mat-card-content class="mt-3">
      <p><strong>Contacto: </strong> {{ company.nomcontacto }}</p>
    </mat-card-content>
    <mat-card-content>
      <p><strong>Teléfono:</strong> {{ company.celcontacto }}</p>
    </mat-card-content>

    <mat-card-actions>
      <button mat-raised-button color="primary">
        <mat-icon>visibility</mat-icon>
        Ver más
      </button>

      <button mat-raised-button color="accent" (click)="onEditCompany(company)">
        <mat-icon>edit</mat-icon>
        Editar
      </button>

      <button mat-stroked-button color="warn" (click)="fileInput.click()">
        <mat-icon>upload</mat-icon>
        Subir imagen
      </button>

      <input
        #fileInput
        type="file"
        hidden
        accept="image/*"
        (change)="onFileSelected($event, company)"
      />
    </mat-card-actions>
  </mat-card>
  }
</div>
